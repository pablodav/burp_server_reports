machine:
  environment:
    TOX_PY34: '3.4.3'
    TOX_PY35: '3.5.2'
    TOX_PY36: '3.6.1'
  python:
    version: 3.4.3
  # https://circleci.com/docs/1.0/docker/
  services:
    - docker

dependencies:
  override:
    - pip -V
    - pip install -U pip
    - pip install --upgrade tox
    - pip install --upgrade tox-pyenv
    - pyenv local $TOX_PY34 $TOX_PY35 $TOX_PY36
    - docker pull greenmail/standalone:1.5.5
    - docker run -d -p 3025:3025 -p 3110:3110 -p 3143:3143 -p 3465:3465 -p 3993:3993 -p 3995:3995 greenmail/standalone:1.5.5

test:
  override:
    - tox -v --recreate
